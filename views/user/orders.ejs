<div class="container mx-auto px-4 py-6">
  <h2 class="text-2xl font-bold mb-6">My Orders</h2>

  <!-- Search bar -->
  <div class="mb-6">
    <input
      type="text"
      placeholder="Search orders"
      class="w-full md:w-1/2 p-3 rounded-lg shadow-sm border border-gray-300"
    />
  </div>

  <% orders.forEach(order => { %>
    <% order.products.forEach(product => { %>
      <div class="bg-white shadow-md rounded-xl p-4 mb-6 flex flex-col md:flex-row items-start md:items-center justify-between">
        
        <!-- Product Info -->
        <div class="flex items-start gap-4">
          <img src="/uploads/products/<%= product.image %>" alt="Product" class="w-20 h-20 object-cover rounded-lg">
          <div>
            <h3 class="font-semibold text-lg"><%= product.productId.name %></h3>
            <p class="text-sm text-blue-600">Order ID: <%= order.orderId %></p>
            <p class="text-pink-600 font-bold mt-1">â‚¹ <%= product.priceAtPurchase %></p>
          </div>
        </div>

        <!-- Order Status & Actions -->
        <div class="mt-4 md:mt-0 text-sm md:text-right">
          <% if (order.orderStatus === 'placed') { %>
            <p class="text-green-600 font-medium">ðŸŸ¢ Expected on <%= order.deliveryDate?.toDateString() || 'TBD' %></p>
            <p class="text-gray-500">Know updates</p>
            <div class="flex gap-2 mt-2 justify-end">
              <button class="bg-red-100 text-red-600 px-4 py-1 rounded-md">Cancel</button>
              <button class="bg-blue-100 text-blue-600 px-4 py-1 rounded-md">Details</button>
            </div>
          <% } else if (order.orderStatus === 'canceled') { %>
            <p class="text-red-600 font-medium">ðŸ”´ Canceled on <%= order.orderDate?.toDateString() %></p>
          <% } else if (order.orderStatus === 'delivered') { %>
            <p class="text-green-600 font-medium">ðŸŸ¢ Delivered on <%= order.deliveryDate?.toDateString() %></p>
            <p class="text-gray-500">Your item was delivered</p>
            <div class="flex gap-2 mt-2 justify-end">
              <button class="bg-red-100 text-red-600 px-4 py-1 rounded-md">Return</button>
              <button class="bg-blue-100 text-blue-600 px-4 py-1 rounded-md">Review</button>
            </div>
          <% } else if (order.orderStatus === 'refunded') { %>
            <p class="text-yellow-600 font-medium">ðŸŸ¡ Refund completed</p>
            <button class="mt-2 text-sm text-blue-600 underline">Rate & Review Product</button>
          <% } %>
        </div>
      </div>
    <% }) %>
  <% }) %>
</div>
